<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings - CollabSpace</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body class="bg-light">
    <!-- Navigation -->
    <%- include('partials/nav') %>

    <div class="container-fluid">
      <div class="row">
        <!-- Sidebar -->
        <%- include('partials/sidebar') %>

        <!-- Main Content Area -->
        <div class="col-md-9">
          <div
            class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
          >
            <h1 class="h2"><i class="fas fa-cog me-2"></i>Settings</h1>
          </div>

          <!-- Settings Content -->
          <div class="row">
            <div class="col-lg-8">
              <!-- Account Settings Card -->
              <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                  <h5 class="mb-0">
                    <i class="fas fa-user-cog me-2"></i>Account Settings
                  </h5>
                </div>
                <div class="card-body">
                  <form id="accountSettingsForm">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label for="timezone" class="form-label"
                            >Timezone</label
                          >
                          <select
                            class="form-select"
                            id="timezone"
                            name="timezone"
                          >
                            <option value="UTC">UTC</option>
                            <option value="America/New_York">
                              Eastern Time
                            </option>
                            <option value="America/Chicago">
                              Central Time
                            </option>
                            <option value="America/Denver">
                              Mountain Time
                            </option>
                            <option value="America/Los_Angeles" selected>
                              Pacific Time
                            </option>
                            <option value="Europe/London">London</option>
                            <option value="Europe/Paris">Paris</option>
                            <option value="Asia/Tokyo">Tokyo</option>
                            <option value="Asia/Kolkata">India</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label for="language" class="form-label"
                            >Language</label
                          >
                          <select
                            class="form-select"
                            id="language"
                            name="language"
                          >
                            <option value="en" selected>English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                            <option value="zh">Chinese</option>
                            <option value="ja">Japanese</option>
                            <option value="hi">Hindi</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="dateFormat" class="form-label"
                        >Date Format</label
                      >
                      <select
                        class="form-select"
                        id="dateFormat"
                        name="dateFormat"
                      >
                        <option value="MM/DD/YYYY" selected>MM/DD/YYYY</option>
                        <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                        <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                        <option value="MMM DD, YYYY">MMM DD, YYYY</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label for="timeFormat" class="form-label"
                        >Time Format</label
                      >
                      <select
                        class="form-select"
                        id="timeFormat"
                        name="timeFormat"
                      >
                        <option value="12" selected>12-hour (AM/PM)</option>
                        <option value="24">24-hour</option>
                      </select>
                    </div>
                    <button type="submit" class="btn btn-primary">
                      <i class="fas fa-save me-2"></i>Save Account Settings
                    </button>
                  </form>
                </div>
              </div>

              <!-- Notification Settings Card -->
              <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                  <h5 class="mb-0">
                    <i class="fas fa-bell me-2"></i>Notification Settings
                  </h5>
                </div>
                <div class="card-body">
                  <form id="notificationSettingsForm">
                    <div class="mb-3">
                      <h6>Email Notifications</h6>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="emailTasks"
                          name="emailTasks"
                          checked
                        />
                        <label class="form-check-label" for="emailTasks">
                          New task assignments
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="emailMessages"
                          name="emailMessages"
                          checked
                        />
                        <label class="form-check-label" for="emailMessages">
                          New team messages
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="emailTeamInvites"
                          name="emailTeamInvites"
                          checked
                        />
                        <label class="form-check-label" for="emailTeamInvites">
                          Team invitations
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="emailUpdates"
                          name="emailUpdates"
                        />
                        <label class="form-check-label" for="emailUpdates">
                          Product updates and announcements
                        </label>
                      </div>
                    </div>

                    <div class="mb-3">
                      <h6>Push Notifications</h6>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="pushTasks"
                          name="pushTasks"
                          checked
                        />
                        <label class="form-check-label" for="pushTasks">
                          Task deadlines and reminders
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="pushMessages"
                          name="pushMessages"
                          checked
                        />
                        <label class="form-check-label" for="pushMessages">
                          New messages when offline
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="pushMentions"
                          name="pushMentions"
                          checked
                        />
                        <label class="form-check-label" for="pushMentions">
                          When mentioned in chat
                        </label>
                      </div>
                    </div>

                    <div class="mb-3">
                      <label for="notificationFrequency" class="form-label"
                        >Notification Frequency</label
                      >
                      <select
                        class="form-select"
                        id="notificationFrequency"
                        name="notificationFrequency"
                      >
                        <option value="immediate" selected>Immediate</option>
                        <option value="hourly">Hourly Summary</option>
                        <option value="daily">Daily Summary</option>
                        <option value="weekly">Weekly Summary</option>
                      </select>
                    </div>

                    <button type="submit" class="btn btn-success">
                      <i class="fas fa-save me-2"></i>Save Notification Settings
                    </button>
                  </form>
                </div>
              </div>

              <!-- Privacy Settings Card -->
              <div class="card shadow-sm mb-4">
                <div class="card-header bg-warning text-dark">
                  <h5 class="mb-0">
                    <i class="fas fa-shield-alt me-2"></i>Privacy Settings
                  </h5>
                </div>
                <div class="card-body">
                  <form id="privacySettingsForm">
                    <div class="mb-3">
                      <h6>Profile Visibility</h6>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="profileVisibility"
                          id="profilePublic"
                          value="public"
                          checked
                        />
                        <label class="form-check-label" for="profilePublic">
                          Public - Anyone can see your profile
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="profileVisibility"
                          id="profileTeams"
                          value="teams"
                        />
                        <label class="form-check-label" for="profileTeams">
                          Team Members Only - Only team members can see your
                          profile
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="profileVisibility"
                          id="profilePrivate"
                          value="private"
                        />
                        <label class="form-check-label" for="profilePrivate">
                          Private - Only you can see your profile
                        </label>
                      </div>
                    </div>

                    <div class="mb-3">
                      <h6>Activity Status</h6>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="showOnlineStatus"
                          name="showOnlineStatus"
                          checked
                        />
                        <label class="form-check-label" for="showOnlineStatus">
                          Show when I'm online
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="showLastSeen"
                          name="showLastSeen"
                          checked
                        />
                        <label class="form-check-label" for="showLastSeen">
                          Show when I was last active
                        </label>
                      </div>
                    </div>

                    <div class="mb-3">
                      <h6>Data & Analytics</h6>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="allowAnalytics"
                          name="allowAnalytics"
                          checked
                        />
                        <label class="form-check-label" for="allowAnalytics">
                          Allow usage analytics to improve the platform
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="allowDataExport"
                          name="allowDataExport"
                          checked
                        />
                        <label class="form-check-label" for="allowDataExport">
                          Allow data export for personal use
                        </label>
                      </div>
                    </div>

                    <button type="submit" class="btn btn-warning">
                      <i class="fas fa-save me-2"></i>Save Privacy Settings
                    </button>
                  </form>
                </div>
              </div>

              <!-- Advanced Settings Card -->
              <div class="card shadow-sm mb-4">
                <div class="card-header bg-danger text-white">
                  <h5 class="mb-0">
                    <i class="fas fa-exclamation-triangle me-2"></i>Advanced
                    Settings
                  </h5>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <h6>Data Management</h6>
                    <button
                      type="button"
                      class="btn btn-outline-primary mb-2"
                      id="exportDataBtn"
                    >
                      <i class="fas fa-download me-2"></i>Export My Data
                    </button>
                    <p class="text-muted small">
                      Download a copy of all your data in JSON format.
                    </p>
                  </div>

                  <div class="mb-3">
                    <h6>Account Actions</h6>
                    <button
                      type="button"
                      class="btn btn-outline-warning mb-2"
                      id="resetSettingsBtn"
                    >
                      <i class="fas fa-undo me-2"></i>Reset All Settings
                    </button>
                    <p class="text-muted small">
                      Reset all settings to their default values.
                    </p>

                    <button
                      type="button"
                      class="btn btn-outline-danger"
                      id="deleteAccountBtn"
                    >
                      <i class="fas fa-trash me-2"></i>Delete Account
                    </button>
                    <p class="text-muted small">
                      Permanently delete your account and all associated data.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Settings Navigation Sidebar -->
            <div class="col-lg-4">
              <div class="card shadow-sm mb-4">
                <div class="card-header bg-info text-white">
                  <h5 class="mb-0">
                    <i class="fas fa-list me-2"></i>Quick Navigation
                  </h5>
                </div>
                <div class="card-body">
                  <div class="list-group list-group-flush">
                    <a
                      href="#accountSettingsForm"
                      class="list-group-item list-group-item-action"
                    >
                      <i class="fas fa-user-cog me-2"></i>Account Settings
                    </a>
                    <a
                      href="#notificationSettingsForm"
                      class="list-group-item list-group-item-action"
                    >
                      <i class="fas fa-bell me-2"></i>Notifications
                    </a>
                    <a
                      href="#privacySettingsForm"
                      class="list-group-item list-group-item-action"
                    >
                      <i class="fas fa-shield-alt me-2"></i>Privacy
                    </a>
                    <a
                      href="#exportDataBtn"
                      class="list-group-item list-group-item-action"
                    >
                      <i class="fas fa-exclamation-triangle me-2"></i>Advanced
                    </a>
                  </div>
                </div>
              </div>

              <!-- Settings Help -->
              <div class="card shadow-sm">
                <div class="card-header bg-secondary text-white">
                  <h5 class="mb-0">
                    <i class="fas fa-question-circle me-2"></i>Need Help?
                  </h5>
                </div>
                <div class="card-body">
                  <p class="card-text">
                    Having trouble with your settings? Check out our help center
                    or contact support.
                  </p>
                  <a href="#" class="btn btn-outline-secondary btn-sm me-2">
                    <i class="fas fa-book me-1"></i>Help Center
                  </a>
                  <a href="#" class="btn btn-outline-secondary btn-sm">
                    <i class="fas fa-envelope me-1"></i>Contact Support
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <%- include('partials/footer') %>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Font Awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <!-- Custom Scripts -->
    <script src="/js/main.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Account settings form handling
        document
          .getElementById("accountSettingsForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const data = Object.fromEntries(formData);

            console.log("Account settings data:", data);
            alert("Account settings saved successfully!");
          });

        // Notification settings form handling
        document
          .getElementById("notificationSettingsForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const data = Object.fromEntries(formData);

            console.log("Notification settings data:", data);
            alert("Notification settings saved successfully!");
          });

        // Privacy settings form handling
        document
          .getElementById("privacySettingsForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const data = Object.fromEntries(formData);

            console.log("Privacy settings data:", data);
            alert("Privacy settings saved successfully!");
          });

        // Export data button
        document
          .getElementById("exportDataBtn")
          .addEventListener("click", function () {
            // Simulate data export
            const mockData = {
              user: {
                firstName: "<%= user.firstName %>",
                lastName: "<%= user.lastName %>",
                role: "<%= user.role %>",
              },
              exportDate: new Date().toISOString(),
              dataTypes: ["profile", "teams", "tasks", "messages"],
            };

            const dataStr = JSON.stringify(mockData, null, 2);
            const dataBlob = new Blob([dataStr], { type: "application/json" });
            const url = URL.createObjectURL(dataBlob);

            const link = document.createElement("a");
            link.href = url;
            link.download = "collabspace-data-export.json";
            link.click();

            URL.revokeObjectURL(url);
            alert("Data export started! Check your downloads folder.");
          });

        // Reset settings button
        document
          .getElementById("resetSettingsBtn")
          .addEventListener("click", function () {
            if (
              confirm(
                "Are you sure you want to reset all settings to their default values? This cannot be undone."
              )
            ) {
              // Reset all forms to default values
              document.getElementById("accountSettingsForm").reset();
              document.getElementById("notificationSettingsForm").reset();
              document.getElementById("privacySettingsForm").reset();

              // Reset specific values
              document.getElementById("timezone").value = "America/Los_Angeles";
              document.getElementById("language").value = "en";
              document.getElementById("dateFormat").value = "MM/DD/YYYY";
              document.getElementById("timeFormat").value = "12";
              document.getElementById("notificationFrequency").value =
                "immediate";
              document.getElementById("profilePublic").checked = true;

              alert("All settings have been reset to their default values.");
            }
          });

        // Delete account button
        document
          .getElementById("deleteAccountBtn")
          .addEventListener("click", function () {
            if (
              confirm(
                "Are you sure you want to delete your account? This action cannot be undone and all your data will be permanently lost."
              )
            ) {
              if (
                confirm(
                  "This is your final warning. Are you absolutely sure you want to delete your account?"
                )
              ) {
                alert(
                  "Account deletion is not implemented in this demo. In a real application, this would permanently delete your account."
                );
              }
            }
          });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute("href"));
            if (target) {
              target.scrollIntoView({
                behavior: "smooth",
                block: "start",
              });
            }
          });
        });
      });
    </script>
  </body>
</html>
